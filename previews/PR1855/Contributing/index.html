<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Contribution guide · ClimateMachine</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimateMachine logo"/></a><div class="docs-package-name"><span class="docs-autofit">ClimateMachine</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../GettingStarted/Installation/">Installation</a></li><li><a class="tocitem" href="../GettingStarted/Terminology/">Terminology</a></li><li><a class="tocitem" href="../GettingStarted/RunningClimateMachine/">Running</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Defaults</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../GettingStarted/Atmos/">Atmosphere model configurations</a></li></ul></li></ul></li><li><span class="tocitem">Tutorials</span></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How-to-guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Common</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Common/Thermodynamics/">Thermodynamics</a></li><li><a class="tocitem" href="../HowToGuides/Common/UniversalFunctions/">Universal Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Atmos</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Atmos/TemperatureProfiles/">Temperature profiles</a></li><li><a class="tocitem" href="../HowToGuides/Atmos/AtmosReferenceState/">Reference profiles</a></li><li><a class="tocitem" href="../HowToGuides/Atmos/MoistureModelChoices/">Moisture model</a></li><li><a class="tocitem" href="../HowToGuides/Atmos/PrecipitationModelChoices/">Precipitation model</a></li></ul></li><li><span class="tocitem">Ocean</span></li><li><span class="tocitem">Land</span></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Numerics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><span class="tocitem">Meshes</span></li><li><input class="collapse-toggle" id="menuitem-4-5-2" type="checkbox"/><label class="tocitem" for="menuitem-4-5-2"><span class="docs-label">DG methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Numerics/DGMethods/how_to_make_a_balance_law/">How to make a balance law</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-5-3" type="checkbox"/><label class="tocitem" for="menuitem-4-5-3"><span class="docs-label">ODE Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Numerics/ODESolvers/Timestepping/">Time-integration</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-5-4" type="checkbox"/><label class="tocitem" for="menuitem-4-5-4"><span class="docs-label">System Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Numerics/SystemSolvers/IterativeSolvers/">Iterative Solvers</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-6" type="checkbox"/><label class="tocitem" for="menuitem-4-6"><span class="docs-label">Diagnostics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../HowToGuides/Diagnostics/UsingDiagnostics/">Using Diagnostics</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">APIs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/">Home</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Driver</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Driver/">Top level interface</a></li><li><a class="tocitem" href="../APIs/Driver/Checkpoint/">Checkpoint</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Atmos</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Atmos/AtmosModel/">AtmosModel</a></li><li><a class="tocitem" href="../APIs/Atmos/Microphysics_0M/">Microphysics_0M</a></li><li><a class="tocitem" href="../APIs/Atmos/Microphysics/">Microphysics</a></li><li><a class="tocitem" href="../APIs/Atmos/TemperatureProfiles/">Temperature Profiles</a></li></ul></li><li><a class="tocitem" href="../APIs/Ocean/Ocean/">Ocean</a></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">Land</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Land/LandModel/">Land Model</a></li><li><a class="tocitem" href="../APIs/Land/Runoff/">Runoff Parameterizations</a></li><li><a class="tocitem" href="../APIs/Land/SoilWaterParameterizations/">Soil Water Parameterizations</a></li><li><a class="tocitem" href="../APIs/Land/SoilHeatParameterizations/">Soil Heat Parameterizations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">Common</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Common/Orientations/">Orientations</a></li><li><a class="tocitem" href="../APIs/Common/Spectra/">Spectra</a></li><li><a class="tocitem" href="../APIs/Common/SurfaceFluxes/">Surface Fluxes</a></li><li><a class="tocitem" href="../APIs/Common/Thermodynamics/">Thermodynamics</a></li><li><a class="tocitem" href="../APIs/Common/TurbulenceClosures/">Turbulence Closures</a></li><li><a class="tocitem" href="../APIs/Common/TurbulenceConvection/">Turbulence Convection</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">Balance Laws</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/BalanceLaws/BalanceLaws/">Balance Laws</a></li><li><a class="tocitem" href="../APIs/BalanceLaws/Problems/">Problems</a></li></ul></li><li><a class="tocitem" href="../APIs/Arrays/Arrays/">Arrays</a></li><li><input class="collapse-toggle" id="menuitem-5-9" type="checkbox"/><label class="tocitem" for="menuitem-5-9"><span class="docs-label">Diagnostics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Diagnostics/Diagnostics/">Diagnostics groups</a></li><li><a class="tocitem" href="../APIs/Diagnostics/StateCheck/">State Check</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-10" type="checkbox"/><label class="tocitem" for="menuitem-5-10"><span class="docs-label">Input/Output</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/InputOutput/">Input/Output</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-11" type="checkbox"/><label class="tocitem" for="menuitem-5-11"><span class="docs-label">Numerics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Numerics/Meshes/Mesh/">Meshes</a></li><li><a class="tocitem" href="../APIs/Numerics/SystemSolvers/SystemSolvers/">SystemSolvers</a></li><li><a class="tocitem" href="../APIs/Numerics/ODESolvers/ODESolvers/">ODESolvers</a></li><li><a class="tocitem" href="../APIs/Numerics/DGMethods/DGMethods/">DG Methods</a></li><li><a class="tocitem" href="../APIs/Numerics/DGMethods/Courant/">Courant</a></li><li><a class="tocitem" href="../APIs/Numerics/DGMethods/NumericalFluxes/">Numerical Fluxes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-12" type="checkbox"/><label class="tocitem" for="menuitem-5-12"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../APIs/Utilities/VariableTemplates/">Variable Templates</a></li><li><a class="tocitem" href="../APIs/Utilities/SingleStackUtils/">Single Stack Utilities</a></li><li><a class="tocitem" href="../APIs/Utilities/TicToc/">Tic Toc</a></li></ul></li></ul></li><li class="is-active"><a class="tocitem" href>Contribution guide</a><ul class="internal"><li><a class="tocitem" href="#What-to-contribute?"><span>What to contribute?</span></a></li><li><a class="tocitem" href="#Using-git"><span>Using <code>git</code></span></a></li><li><a class="tocitem" href="#Develop-your-feature"><span>Develop your feature</span></a></li><li><a class="tocitem" href="#Continuous-integration"><span>Continuous integration</span></a></li><li><a class="tocitem" href="#Contributing-Documentation"><span>Contributing Documentation</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Theory</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-7-1" type="checkbox"/><label class="tocitem" for="menuitem-7-1"><span class="docs-label">Common</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Theory/Common/SurfaceFluxes/">SurfaceFluxes</a></li><li><a class="tocitem" href="../Theory/Common/Turbulence/">Turbulence Closures</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Atmos</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Theory/Atmos/AtmosModel/">AtmosModel</a></li><li><a class="tocitem" href="../Theory/Atmos/EDMF_plots/">EDMF Model</a></li><li><a class="tocitem" href="../Theory/Atmos/Microphysics_0M/">Microphysics_0M</a></li><li><a class="tocitem" href="../Theory/Atmos/Microphysics/">Microphysics</a></li><li><a class="tocitem" href="../Theory/Atmos/EDMFEquations/">EDMF equations</a></li><li><a class="tocitem" href="../Theory/Atmos/Model/tracers/">Tracers</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Developer docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../DevDocs/CodeStyle/">Coding style</a></li><li><a class="tocitem" href="../DevDocs/AcceptableUnicode/">Acceptable Unicode</a></li><li><a class="tocitem" href="../DevDocs/ModelVariableList/">Model variable list</a></li><li><a class="tocitem" href="../DevDocs/ModelOutput/">Model output</a></li><li><a class="tocitem" href="../DevDocs/DiagnosticVariableList/">Diagnostic variable list</a></li><li><a class="tocitem" href="../DevDocs/SystemImage/">Custom System Image</a></li></ul></li><li><a class="tocitem" href="../References/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Contribution guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Contribution guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CliMA/ClimateMachine.jl/blob/master/docs/src/Contributing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h1><p>Thank you for considering contributing to the <code>ClimateMachine</code>! We encourage Pull Requests (PRs). Please do not hesitate to ask as questions if you&#39;re unsure about how to help.</p><h2 id="What-to-contribute?"><a class="docs-heading-anchor" href="#What-to-contribute?">What to contribute?</a><a id="What-to-contribute?-1"></a><a class="docs-heading-anchor-permalink" href="#What-to-contribute?" title="Permalink"></a></h2><ul><li><p>The easiest way to contribute is by running the <code>ClimateMachine</code>, identifying problems and opening issues.</p></li><li><p>You can tackle an existing issue. We have a list of good <a href="https://github.com/CliMA/ClimateMachine.jl/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">first issues</a>.</p></li><li><p>Write an example or tutorial.</p></li><li><p>Improve documentation or comments if you found something hard to use.</p></li><li><p>Implement a new feature if you need it to use the <code>ClimateMachine</code>.</p></li></ul><h2 id="Using-git"><a class="docs-heading-anchor" href="#Using-git">Using <code>git</code></a><a id="Using-git-1"></a><a class="docs-heading-anchor-permalink" href="#Using-git" title="Permalink"></a></h2><p>If you are unfamiliar with <code>git</code> and version control, the following guides will be helpful:</p><ul><li><a href="https://www.atlassian.com/git/tutorials">Atlassian (bitbucket) <code>git</code> tutorials</a>. A set of tips and tricks for getting started with <code>git</code>.</li><li><a href="https://try.github.io/">GitHub&#39;s <code>git</code> tutorials</a>. A set of resources from GitHub to learn <code>git</code>.</li></ul><p>We provide a brief guide here.</p><h3 id="Identity"><a class="docs-heading-anchor" href="#Identity">Identity</a><a id="Identity-1"></a><a class="docs-heading-anchor-permalink" href="#Identity" title="Permalink"></a></h3><p>First make sure <code>git</code> knows your name and email address:</p><pre><code class="language-none">$ git config --global user.name &quot;A. Climate Developer&quot;
$ git config --global user.email &quot;a.climate.developer@eg.com&quot;</code></pre><h3 id="Forks-and-branches"><a class="docs-heading-anchor" href="#Forks-and-branches">Forks and branches</a><a id="Forks-and-branches-1"></a><a class="docs-heading-anchor-permalink" href="#Forks-and-branches" title="Permalink"></a></h3><p>Create your own fork of the <code>ClimateMachine</code> <a href="https://github.com/CliMA/ClimateMachine.jl">on GitHub</a> and check out your copy:</p><pre><code class="language-none">$ git clone https://github.com/&lt;username&gt;/ClimateMachine.jl.git
$ cd ClimateMachine.jl
$ git remote add upstream https://github.com/CliMA/ClimateMachine.jl</code></pre><p>Now you have two remote repositories – <code>origin</code>, which is your fork of the <code>ClimateMachine</code>, and <code>upstream</code>, which is the main <code>ClimateMachine.jl</code> repository.</p><p>Create a branch for your feature; this will hold your contribution:</p><pre><code class="language-none">$ git checkout -b &lt;branchname&gt;</code></pre><h2 id="Develop-your-feature"><a class="docs-heading-anchor" href="#Develop-your-feature">Develop your feature</a><a id="Develop-your-feature-1"></a><a class="docs-heading-anchor-permalink" href="#Develop-your-feature" title="Permalink"></a></h2><p>Follow the <a href="../DevDocs/CodeStyle/#Coding-conventions">Coding conventions</a> we use. Make sure you add tests for your code in <code>test/</code> and appropriate documentation in the code and/or in <code>docs/</code>.</p><p>When your PR is ready for review, clean up your commit history by squashing and make sure your code is current with <code>ClimateMachine</code> master by rebasing.</p><h3 id="Squash-and-rebase"><a class="docs-heading-anchor" href="#Squash-and-rebase">Squash and rebase</a><a id="Squash-and-rebase-1"></a><a class="docs-heading-anchor-permalink" href="#Squash-and-rebase" title="Permalink"></a></h3><p>Use <code>git rebase</code> (not <code>git merge</code>) to sync your work:</p><pre><code class="language-none">$ git fetch upstream
$ git rebase upstream/master</code></pre><p>You might find it easier to <a href="https://github.com/edx/edx-platform/wiki/How-to-Rebase-a-Pull-Request#squash-your-changes">squash your commits</a> first.</p><h2 id="Continuous-integration"><a class="docs-heading-anchor" href="#Continuous-integration">Continuous integration</a><a id="Continuous-integration-1"></a><a class="docs-heading-anchor-permalink" href="#Continuous-integration" title="Permalink"></a></h2><p>It&#39;s time to click the button to open your PR! Fill out the template and provide a clear summary of what your PR does. When a PR is created or updated, a set of automated tests are run on the PR in our continuous integration (CI) system.</p><p>A <code>ClimateMachine</code> developer will look at your PR and provide feedback!</p><h3 id="Unit-testing"><a class="docs-heading-anchor" href="#Unit-testing">Unit testing</a><a id="Unit-testing-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-testing" title="Permalink"></a></h3><p>Currently a number of checks are run per commit for a given PR.</p><ul><li><code>JuliaFormatter</code> checks if the PR is formatted with <code>.dev/climaformat.jl</code>.</li><li><code>Documentation</code> rebuilds the documentation for the PR and checks if the docs are consistent and generate valid output.</li><li><code>Unit Tests</code> run subsets of the unit tests defined in <code>tests/</code>, using <code>Pkg.test()</code>.  The tests are run in parallel to ensure that they finish in a reasonable time.  The tests only run the latest commit for a PR, branch and will kill any stale jobs on push.  These tests are only run on linux (Ubuntu LTS).</li></ul><p>Unit tests are run against every new commit for a given PR, the status of the unit-tests are not checked during the merge process but act as a sanity check for developers and reviewers. Depending on the content changed in the PR, some CI checks that are not necessary will be skipped.  For example doc only changes do not require the unit tests to be run.</p><h3 id="The-merge-process"><a class="docs-heading-anchor" href="#The-merge-process">The merge process</a><a id="The-merge-process-1"></a><a class="docs-heading-anchor-permalink" href="#The-merge-process" title="Permalink"></a></h3><p>We use <a href="https://bors.tech/"><code>bors</code></a> to manage merging PR&#39;s in the the <code>ClimateMachine</code> repo. If you&#39;re a collaborator and have the necessary permissions, you can type <code>bors try</code> in a comment on a PR to have integration test suite run on that PR, or <code>bors r+</code> to try and merge the code.  Bors ensures that all integration tests for a given PR always pass before merging into <code>master</code>.</p><h3 id="Integration-testing"><a class="docs-heading-anchor" href="#Integration-testing">Integration testing</a><a id="Integration-testing-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-testing" title="Permalink"></a></h3><p>Currently a number of checks are run during integration testing before being merged into master.</p><ul><li><code>JuliaFormatter</code> checks if the PR is formatted with <code>.dev/climaformat.jl</code>.</li><li><code>Documentation</code> checks that the documentation correctly builds for the merged PR.</li><li><code>OS Unit Tests</code> checks that ClimateMachine.jl package unit tests can pass  on every OS supported with a pre-compiled system image (Linux, macOS, Windows).</li><li><code>ClimateMachine-CI</code> computationally expensive integration testing on CPU and GPU hardware using HPC cluster resources.</li></ul><p>Integration tests are run when triggered by a reviewer through <code>bors</code>. Integration tests are more computationally heavyweight than unit-tests and can exercise tests using accelerator hardware (GPUs).</p><p>Currently HPC cluster integration tests are run using the <a href="https://buildkite.com/clima/climatemachine-ci">Buildkite CI service</a>. Tests are parallelized and run as individual <a href="https://slurm.schedmd.com/documentation.html">Slurm</a> batch jobs on the HPC cluster and defined in <code>.buildkite/pipeline.yml</code>.</p><p>An example integration test definition is outlined below:</p><pre><code class="language-none">  - label: &quot;gpu_soil_test_bc&quot;
    key: &quot;gpu_soil_test_bc&quot;
    command:
      - &quot;mpiexec julia --color=yes --project test/Land/Model/test_bc.jl &quot;
    agents:
      config: gpu
      queue: central
      slurm_ntasks: 1
      slurm_gres: &quot;gpu:1&quot;</code></pre><ul><li>label / key: unique test defintion strings</li><li>command(s): list of one or more bash commands to run.</li><li>agent block:<ul><li><code>config</code>: Defines <code>cpu</code> or <code>gpu</code> test environments.</li><li><code>queue</code>: HPC queue to submit the job (default <code>central</code>).</li><li><code>slurm_</code>: All <code>slurm_</code> definitions are passed through as  <a href="https://slurm.schedmd.com/sbatch.html">slurm batch job cli options</a>.  Ex. for the above the <code>slurm_ntasks: 1</code> is eqv. to <code>--ntasks=1</code>.  Flags are defined with an empty value.</li></ul></li></ul><h2 id="Contributing-Documentation"><a class="docs-heading-anchor" href="#Contributing-Documentation">Contributing Documentation</a><a id="Contributing-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing-Documentation" title="Permalink"></a></h2><p>Documentation is written in Julia-flavored markdown and generated from two sources:</p><pre><code class="language-none">$CLIMATEMACHINE_HOME/docs/src</code></pre><p>And <a href="https://fredrikekre.github.io/Literate.jl/v2/">Literate.jl</a> tutorials:</p><pre><code class="language-none">$CLIMATEMACHINE_HOME/tutorials</code></pre><p>To locally build the documentation you need to create a new <code>docs</code> project to build and install the documentation related dependencies:</p><pre><code class="language-none">cd $CLIMATEMACHINE_HOME
julia --project=docs/ -e &#39;using Pkg; Pkg.instantiate()&#39;
julia --project=docs docs/make.jl</code></pre><p>The makefile script will generate the appropriate markdown files and static html from both the <code>docs/src</code> and <code>tutorials/</code> directories, saving the output in <code>docs/src/generated</code>.</p><h3 id="How-to-generate-a-literate-tutorial-file"><a class="docs-heading-anchor" href="#How-to-generate-a-literate-tutorial-file">How to generate a literate tutorial file</a><a id="How-to-generate-a-literate-tutorial-file-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-generate-a-literate-tutorial-file" title="Permalink"></a></h3><p>To create a tutorial using ClimateMachine, please use <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>, and consult the <a href="https://fredrikekre.github.io/Literate.jl/stable/">Literate documentation</a> for questions. For now, all literate tutorials are held in the <code>tutorials</code> directory.</p><p>With Literate, all comments turn into markdown text and any Julia code is read and run <em>as if it is in the Julia REPL</em>. As a small caveat to this, you might need to suppress the output of certain commands. For example, if you define and run the following function</p><pre><code class="language-none">function f()
    return x = [i * i for i in 1:10]
end

x = f()</code></pre><p>The entire list will be output, while</p><pre><code class="language-none">f();</code></pre><p>does not (because of the <code>;</code>).</p><p>To show plots, you may do something like the following:</p><pre><code class="language-none">using Plots
plot(x)</code></pre><p>Please consider writing the comments in your tutorial as if they are meant to be read as an <em>article explaining the topic the tutorial is meant to explain.</em> If there are any specific nuances to writing Literate documentation for ClimateMachine, please let us know!</p><h3 id="Speeding-up-the-documentation-build-process"><a class="docs-heading-anchor" href="#Speeding-up-the-documentation-build-process">Speeding up the documentation build process</a><a id="Speeding-up-the-documentation-build-process-1"></a><a class="docs-heading-anchor-permalink" href="#Speeding-up-the-documentation-build-process" title="Permalink"></a></h3><p>Building the tutorials can take a long time so there is an environment variable switch to toggle on / off building the tutorials (<code>true</code> deafult):</p><pre><code class="language-none">CLIMATEMACHINE_DOCS_GENERATE_TUTORIALS=false julia --project=docs/ docs/make.jl</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../APIs/Utilities/TicToc/">« Tic Toc</a><a class="docs-footer-nextpage" href="../Theory/Common/SurfaceFluxes/">SurfaceFluxes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 12 December 2020 01:33">Saturday 12 December 2020</span>. Using Julia version 1.5.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
